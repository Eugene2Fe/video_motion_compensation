## Стабилизация движения на видео

Проект предтавляет собою реализацию алгоритма стабилизации видеокадров видео с использованием методов обработки изображений и анализа движений в кадре. Основная цель — уменьшить эффект дрожания камеры и повысить качество видеоматериала.

## Описание

Данный проект реализует покадровую видеостабилизацию с использованием библиотеки OpenCV и инструментов для обработки видео и изображений. Алгоритм анализирует движения в кадре, формирует траекторию движения и корректирует ее в более сглаженном представлении, чтобы устранить неприятное колебания и дерганье камеры. Проект может быть полезен для обработки видео с любых устройств, где отсутствует видеостабилизация.

## Основные особенности

* Значительно улучшение качество стабилизации за счет применения сгалиживания по широкому диапозону соседних фреймов
* Поддержка различных форматов видео файлов (MP4, MOV, AVI и др.).
* Оптимизировано для работы с видео высокого разрешения.
* Использование библиотек OpenCV

## Установка

# Требования

* Библиотека OpenCV версии 4 и выше.
* Библиотека OpenCV должна быть собрана с поддержкой FFMPEG (в подвале есть инструкция)
* C++17 или выше.

# Шаги установки
1. Склонируйте и перейдите в репозиторий:

```sh
git clone https://github.com/Eugene2Fe/video_motion_compensation && cd video_motion_compensation
```

2. Соберите проект с помощью CMake:
```sh
mkdir build
cd build
cmake ..
make
```
3. После успешной сборки, вы можете запустить проект, передав путь к видеофайлу:
Обработанное видео будет в той же директории с префиксом '_stabilized'
```sh
./video_stabilization ../data/input_video.mp4
```
4. Для более подробной информации и списка доступных ключей можно вызывать ```--help```


# Инструкция пересборки OpenCV с FFMPEG
Проверить поддержку ffmpeg можно командой, где 'YES' значит есть поддержка, 'NO' нет.
```sh
python3 -c "import cv2; print(cv2.getBuildInformation())" | grep FFMPEG
```
# Если отсутствует подержка, то необходимо выполнить переустановку OpenCV c поддержкой FFmpeg
```sh
sudo apt-get update
sudo apt-get install ffmpeg libavcodec-dev libavformat-dev libavutil-dev
git clone https://github.com/opencv/opencv.git
cd opencv
mkdir build
cd build
cmake -D WITH_FFMPEG=ON ..
make -j4
sudo make install
```
И повторно выполнить проверку.